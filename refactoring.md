Relocate and Consolidate Canvas Cursor Effect Script & Clean up Contribution Graph Library
Analysis: The code in src/components/ui/canvas.tsx is an old imperative script using global state and direct DOM manipulation, which is generally bad practice in React. It's confusingly placed under components/ui. It's used by src/components/CursorAnimation.tsx and also incorrectly initialized in src/components/Hero.tsx. Furthermore, there's a mix-up with the github-contribution-graph library and your custom graph component.
Action:
Relocate Script: Move the code from src/components/ui/canvas.tsx (all the functions like n, Line, render, renderCanvas, onMousemove, resizeCanvas, Node, and the global variables ctx, f, e, pos, lines, E) into a new file located in a dedicated utility folder, e.g., src/utils/cursorEffectScript.js (using .js might be clearer given its non-TS nature, or keep .ts and use @ts-ignore liberally if preferred, but .js is arguably more honest about its type-unsafety).
Consolidate Initialization: Ensure that src/components/CursorAnimation.tsx is the only component that imports and calls renderCanvas from the new cursorEffectScript utility file. Remove the useEffect and the call to renderCanvas() within src/components/Hero.tsx. CursorAnimation.tsx is correctly structured to manage the canvas element and its lifecycle within a React component. Update CursorAnimation.tsx to import renderCanvas and resizeCanvas from src/utils/cursorEffectScript.js. Keep the existing resize listener and cleanup in CursorAnimation.tsx's useEffect. Acknowledge the limitation: Without rewriting the script, the cleanup inside cursorEffectScript.js itself (e.g., removing all listeners added by onMousemove, stopping the requestAnimationFrame loop) will not be handled cleanly by React component unmount. This is the trade-off for not rewriting.
Contribution Graph Cleanup: You have two components related to contribution graphs (src/components/ui/ContributionGraph.tsx - singular, custom) and src/components/ui/ContributionsGraph.tsx - plural, uses a library). ProfilePage.tsx uses the singular, custom one. The external CSS link in src/index.html and the styles in src/index.css targeting .contribution-graph-tooltip seem related to the library component, which isn't used.
Change: Remove the link to github-contribution-graph CSS from src/index.html. Remove the file src/components/ui/ContributionsGraph.tsx (plural) as it's unused. Review src/index.css and remove any styles that specifically target the library's output (like .contribution-graph-tooltip). The custom ContributionGraph.tsx component's AnimatedTooltip is styled directly with Tailwind classes and inline styles. Remove the github-contribution-graph dependency from package.json.